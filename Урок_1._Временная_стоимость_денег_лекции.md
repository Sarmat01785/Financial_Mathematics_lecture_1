# Финансовая математика
## Урок 1. Временная стоимость денег

## Термины

- **Наращение** - процесс перевода денежной суммы от прошлого момента к будущему
- **Дисконтирование** – процесс перевода денежной суммы от будущего момента времени к прошлому
- **Номинальная процентная ставка** - та процентная ставка, которая зафиксирована в договоре (например, кредита или депозита)
- **Эффективная процентная ставка** - та процентная ставка, которая дает тот же эффект с точки зрения итоговой денежной суммы, но при условии начисления 1 раз в год
- **Инфляция** – падение покупательской способности денег во времени
- **Потребительская корзина** - набор товаров и услуг, характеризующий уровень и структуру потребления экономического субъекта
- **Номинальная процентная ставка** – процентная ставка, которая отражает реальные цены активов (и тем самым включает в себя инфляцию)
- **Реальная процентная ставка** - процентная ставка, очищенная от инфляции
- **Неопределенность** - отсутствие точной информации о будущем развитии событий, течении процессов и финансовых результатах
- **Риск** - измеримая возможность наступления неблагоприятных финансовых последствий (потери всех или части инвестированных денег) в результате неопределенности

**Временная стоимость денег** - **Концепция временной** стоимости денег `(TVM)` гласит, что сумма денег, которой вы владеете сегодня, стоит больше, чем та же сумма в будущем из-за ее потенциальной доходности. Это основополагающий принцип финансов, который влияет на инвестиционные решения, кредитование и сбережения.

Давайте рассмотрим простой пример. Представьте, что у вас есть 1000 рублей сегодня, и вы можете положить их в банк под процентную ставку 10% годовых. Через год вы получите 1100 рублей. Эти дополнительные 100 рублей - это и есть временная стоимость ваших денег.

### Временную стоимость можно ощутить даже в обычной жизни

На бытовом уровне можно ощутить временную
стоимость денег:

1) Возможность положить деньги сейчас в банк и заработать на них

2) Уменьшение того объёма экономических благ, которые на эту сумму можно будет купить в будущем.

**Поскольку любой человек может инвестировать свои накопления под некоторый процент, то можно сформулировать следующим образом:** 

`Чем раньше мы получаем деньги, тем это выгоднее для нас!`

`Отсюда следует другой вывод: чем позже мы платим деньги тем выгодней для нас.`

### Зачем нужна концепция временной стоимости денег? 

Концепция временной стоимости денег применяется практически во всех сферах экономики и финансов: 

1) Оценка ценных бумаг, недвижимости и других финансовых и нефинансовых активов.
2) Оценка привлекательности отдельных инвестиционных проектов и целого бизнеса.
3) Расчёты платежей по кредитам и лизингам.
4) Расчёты будущих финансовых обязательств для физического лица или для компании.
5) Определение требуемой доходности для инвестиций.

## Простые и сложные проценты

### Что такое процентная ставка?

Количественным отражением временной стоимости денег является `процентная ставка`, которая может интерпретироваться тремя способами:

- `Ставка доходности`, которую требует инвестор, чтобы вложить деньги в данную инвестицию. Например, инвестору предложили вложить деньги в проект, обещая 10% годовых. Однако инвестор считает, что в проекты, которые приносят менее 15% годовых, ему вкладывать неинтересно, и отказывается. Таким образом, в этом примере 15% - это и есть требуемая ставка доходности для данного инвестора.

- `Альтернативная стоимость`, также известная как `"вмененные издержки"` – альтернативные возможности вложений для конкретного инвестора. Например, у инвестора есть возможность вместо покупки акций положить деньги на депозит под 12% годовых. Тогда прогнозируемую доходность акций он будет сравнивать с этой ставкой, 12%, и она будет выступать альтернативной стоимостью для него.

- `Математический параметр` (называется `“ставка дисконтирования”`), который используется для выполнения расчетов. Ставка дисконтирования – это параметр, который используется для сравнения денежных сумм в разные моменты времени. 

## Процентная ставка бывает двух видов:

1) **Простая процентная ставка** – применяется только к основной сумме долга

2) **Сложная процентная ставка** - учитывает начисление процентов на всю сумму, включая ранее начисленные проценты. Ситуация, когда проценты начисляются на уже накопленные проценты, называется капитализацией. 

# Теперь давайте разберем формулы расчета простых процентов. 

Формула для расчета будущей стоимости денег (FV - Future Value):
$$ FV = PV \cdot (1 + i \cdot n) $$

где:

- $PV$ - настоящая (текущая) стоимость денег
- $i$ - процентная ставка за один период
- $n$ - количество периодов

***Это базовая формула финансовой математики, которая используется для расчета будущей стоимости денег `(FV - Future Value)`. Она показывает, какова будет стоимость денег через определенное количество времени, учитывая некоторую процентную ставку.***
- PV (Present Value) - это текущая (настоящая) стоимость денег. То есть сколько денег у вас есть сегодня.
- i (interest rate) - процентная ставка за один период.
- n (number of periods) - количество периодов, в течение которых деньги будут инвестированы или заем будут находиться в вашем владении.

Процентная ставка `(i)` и количество периодов `(n)` должны соответствовать друг другу. Например, если процентная ставка указана за год, то `(n)` должно выражать количество лет.

Формула показывает, что если вы инвестируете сумму денег `(PV)` под определенную процентную ставку `(i)`, то через `(n)` периодов у вас будет `FV`. Проценты в данном случае начисляются один раз в конце каждого периода и не капитализируются, то есть не добавляются к основной сумме долга или инвестиций для начисления процентов в следующем периоде.

### Пример расчета простых процентов:

Предположим, у вас есть 1000 долларов (PV), и вы хотите инвестировать их под 5% годовых (i = 0.05) на 3 года (n = 3). Подставляя эти значения в формулу, получим:

$$ FV = 1000 * (1 + 0.05 * 3) $$

$$ FV = 1150 $$

Таким образом, через три года вы получите 1150 долларов.

### Формула текущей стоимости

Формула для расчета настоящей (текущей) стоимости будущих денежных потоков:

$$ PV = \frac{FV}{(1 + i \cdot n)} $$

где:

- $PV$ (Present Value) — настоящая стоимость, т.е. сумма денег, которую необходимо инвестировать сегодня, чтобы получить определенную сумму в будущем.
- $FV$ (Future Value) — будущая стоимость, т.е. сумма денег, которую мы хотим получить в будущем.
- $i$ (interest rate) — процентная ставка за один период.
- $n$ (number of periods) — количество периодов времени, на которое делается инвестиция или заем.

Данная формула позволяет вычислить, какую сумму необходимо инвестировать сейчас, чтобы достичь желаемой суммы в будущем, учитывая конкретную процентную ставку.

### Пример

Рассмотрим пример. Вы хотите накопить $2000 через 4 года. Процентная ставка составляет 5% в год. Сколько денег вам нужно инвестировать сегодня, чтобы достичь вашей финансовой цели?

Подставляем наши значения в формулу:

$$ PV = \frac{2000}{(1 + 0.05 \cdot 4)} $$

$$ PV \approx 1666.67 $$

Таким образом, чтобы достичь цели накопления 2000 долларов через 4 года при процентной ставке в 5% в год, вам необходимо инвестировать примерно $1666.67 сегодня.

# Теперь давайте разберем формулы расчета сложных процентов. 

# Финансовая математика
## Временная стоимость денег и сложные проценты

Когда мы инвестируем деньги или откладываем их на сберегательный счет, мы часто сталкиваемся с понятием "сложные проценты". Это означает, что проценты, которые мы зарабатываем на нашу первоначальную сумму (основную сумму), также начинают приносить проценты со временем.

### Формула будущей стоимости с использованием сложного процента

Формула для расчета будущей стоимости (FV) суммы при условии начисления сложных процентов выглядит следующим образом:

$$ FV = PV \cdot (1 + i)^n $$

где:

- $FV$ — будущая стоимость капитала.
- $PV$ — настоящая (текущая) стоимость капитала, или первоначальная сумма инвестиций.
- $i$ — процентная ставка за один период (в десятичной форме).
- $n$ — количество периодов начисления процента.

Эта формула учитывает, что проценты начисляются не только на основную сумму, но и на проценты, которые были заработаны в предыдущие периоды. Это явление известно как "эффект сложного процента".

### Пример расчета

Допустим, мы хотим инвестировать $1000 (PV) под 5% годовых (i = 0.05) на 3 года (n = 3). Какова будет будущая стоимость этой инвестиции?

Расчет будет следующим:

1. Сначала учтем процентную ставку и количество лет: $(1 + 0.05)^3$.
2. Затем умножим начальную сумму на полученный коэффициент: $1000 \cdot (1.05)^3$.

Проведем вычисления:

$$ FV = 1000 \cdot (1 + 0.05)^3 $$
$$ FV = 1000 \cdot 1.157625 $$
$$ FV = 1157.63 $$

Таким образом, через 3 года наша инвестиция в размере 1000 вырастет до $1157.63 благодаря эффекту сложного процента.

## Концепция дисконтирования и временная стоимость денег

Когда мы думаем о стоимости денег во времени, важно понимать, что деньги имеют разную стоимость в разные моменты времени. Это явление известно как временная стоимость денег. Под текущей (или настоящей) стоимостью понимается стоимость в сегодняшних деньгах суммы, которую мы планируем получить в будущем.

### Формула текущей стоимости

Формула для определения текущей стоимости будущей суммы денег:

$$ PV = \frac{FV}{(1 + i)^n} $$

где:

- $PV$ (Present Value) — текущая стоимость будущей суммы денег.
- $FV$ (Future Value) — будущая стоимость, та сумма, которую мы ожидаем получить в будущем.
- $i$ (interest rate) — процентная ставка за период, выраженная в десятичной форме (например, 3% будет 0.03).
- $n$ (number of periods) — количество периодов начисления процента (например, количество лет).

### Процесс дисконтирования

Дисконтирование — это процесс обратный начислению процентов. Вместо того чтобы вычислять, как растет сумма денег со временем, мы вычисляем, какую сумму денег нужно вложить сегодня, чтобы достичь желаемой суммы в будущем при заданной процентной ставке и количестве периодов.

### Пример

Если бы мы хотели знать, сколько нам нужно вложить сегодня, чтобы получить $10,000 через 5 лет при процентной ставке 3% годовых, мы бы использовали формулу следующим образом:

1. Вычисляем коэффициент дисконтирования: $(1 + 0.03)^5$.
2. Разделяем будущую сумму денег на коэффициент дисконтирования: $\frac{10000}{(1.03)^5}$.

Проведем вычисления:

$$ PV = \frac{10000}{(1.03)^5} $$

$$ PV \approx 8621.39 $$

Таким образом, чтобы получить 10 000 через 5 лет при процентной ставке в 3% в год, необходимо инвестировать сегодня примерно $8621.39.

### Задача 1. Пусть мы вкладываем 1 000 рублей под 12% годовых на 3 года. Сколько мы получим при начислении простых и сложных процентов?


```python
# Начальные параметры
PV = 1000  # первоначальная сумма вклада в рублях
i = 0.12   # годовая процентная ставка
n = 3      # количество лет

# Расчет суммы вклада с простыми процентами
FV_simple = PV * (1 + i * n)

# Расчет суммы вклада со сложными процентами
FV_compound = PV * (1 + i) ** n

# Вывод результатов
print(f"Сумма вклада с простыми процентами через {n} года: {FV_simple} рублей")
print(f"Сумма вклада со сложными процентами через {n} года: {FV_compound} рублей")
```

    Сумма вклада с простыми процентами через 3 года: 1359.9999999999998 рублей
    Сумма вклада со сложными процентами через 3 года: 1404.9280000000003 рублей
    

### Задача 2. Человек хочет иметь возможность через 16 лет оплатить образование своему ребенку. Он планирует, что для оплаты учебы в университете, нужно будет иметь $100 тыс. Если текущая доходность банковского депозита равна 4% годовых, то сколько нужно положить в банк сейчас, чтобы через 16 лет получить нужную сумму?


```python
# Параметры задачи
FV = 100000  # Будущая стоимость - необходимая сумма через 16 лет в долларах
i = 0.04     # Годовая процентная ставка в десятичной форме
n = 16       # Количество лет

# Расчет текущей стоимости
PV = FV / ((1 + i) ** n)

# Вывод результата
print(f"Необходимо вложить сейчас: ${PV:.2f}, чтобы получить $100,000 через {n} лет.")
```

    Необходимо вложить сейчас: $53390.82, чтобы получить $100,000 через 16 лет.
    

### Задача 3. Если инвестор получил наследство в размере $125 тыс и хочет вложить его в акции на фондовом рынке, то какую сумму он может ожидать получить через 20 лет, если средняя доходность фондового рынка ожидается 7% годовых? 


```python
# Начальные параметры
PV = 125000  # Начальная сумма наследства в долларах
i = 0.07     # Средняя годовая доходность в десятичной форме
n = 20       # Количество лет

# Расчет будущей стоимости инвестиций
FV = PV * ((1 + i) ** n)

# Вывод результата
print(f"Ожидаемая сумма через {n} лет: ${FV:,.2f}")
```

    Ожидаемая сумма через 20 лет: $483,710.56
    

# Расчет будущей стоимости инвестиций с учетом сложных процентов

Формула для расчета будущей стоимости (FV) инвестиций, учитывая сложные проценты, начисляемые несколько раз в год, выглядит следующим образом:

$$ FV = PV \times \left(1 + \frac{r}{m}\right) ^ {n \times m} $$

где:

- $FV$ — Будущая стоимость инвестиций
- $PV$ — Настоящая (текущая) стоимость инвестиций, т.е. первоначальная сумма вложенных средств
- $r$ — Годовая процентная ставка (в десятичной форме)
- $m$ — Число периодов начисления процентов в году
- $n$ — Количество лет

## Концепция сложных процентов

Сложные проценты — это проценты на проценты. Они не только начисляются на первоначальную сумму, но и на проценты, которые уже были начислены в предыдущие периоды. Это отличается от простых процентов, которые начисляются только на первоначальную сумму каждый раз.

## Пример

Допустим, вы хотите вложить 1000 под 7% годовых. Проценты начисляются ежеквартально, поэтому $m$ равно 4, а срок вложения составляет 1 год, т.е. $n$ равно 1.

Произведем расчеты:

$$ FV = 1000 \times \left(1 + \frac{0.07}{4}\right) ^ {1 \times 4} $$
$$ FV = 1000 \times \left(1 + 0.0175\right) ^ 4 $$
$$ FV = 1000 \times 1.071859 $$
$$ FV \approx 1071.86 $$

Таким образом, через год, с учетом ежеквартального начисления сложных процентов, вы получите примерно $1071.86.

### Задача 4. В кредитном договоре прописана ставка 15% годовых. Если начисление процентов осуществляется ежемесячно, какова эффективная ставка по кредиту?

Чтобы рассчитать эффективную процентную ставку кредита, нужно использовать формулу для эффективной процентной ставки при сложных процентах, начисляемых ежемесячно. Формула выглядит следующим образом:

$$
\text{Эффективная ставка} = \left(1 + \frac{\text{номинальная ставка}}{\text{количество периодов в году}}\right) ^ {\text{количество периодов в году}} - 1
$$

В нашем случае номинальная ставка составляет 15% годовых, а начисление процентов осуществляется ежемесячно, то есть 12 раз в год.


```python
# Параметры кредита
номинальная_ставка = 0.15  # Номинальная ставка в десятичной форме
количество_начислений = 12  # Количество периодов начисления в году (ежемесячно)

# Расчет эффективной процентной ставки
эффективная_ставка = (1 + номинальная_ставка / количество_начислений) ** количество_начислений - 1

# Вывод результата
print(f"Эффективная процентная ставка по кредиту: {эффективная_ставка:.4f} или {эффективная_ставка * 100:.2f}%")
```

    Эффективная процентная ставка по кредиту: 0.1608 или 16.08%
    

# Расчет будущей стоимости инвестиций

Формула для расчета будущей стоимости (FV) инвестиций:

$$ FV = PV \times (1 + \text{эф.ставка}) $$

где:

- $FV$ — Будущая стоимость инвестиций.
- $PV$ — Текущая (или настоящая) стоимость инвестиций, то есть сумма денег, которую вы инвестируете в начале.
- $\text{эф.ставка}$ — Эффективная процентная ставка, представляющая собой годовую ставку, скорректированную с учетом периодичности начисления процентов.


## Как работает формула

Эта формула позволяет рассчитать, сколько денег вы получите в будущем, исходя из первоначальной суммы инвестиций и эффективной ставки процента. Эффективная ставка учитывает сложные проценты, то есть проценты на проценты, если они начисляются чаще, чем раз в год.

## Пример

Например, если вы вложили $1000 под эффективную ставку 5% годовых, то через год вы получите:

$$ FV = 1000 \times (1 + 0.05) $$
$$ FV = 1000 \times 1.05 $$
$$ FV = 1050 $$

В результате, спустя один год, ваша инвестиция вырастет до $1050, что отражает увеличение на сумму, равную 5% от первоначальной инвестиции.

# Дисконтирование: Определение

Дисконтирование — это финансовая процедура, позволяющая определить текущую стоимость будущих денежных потоков или отдельных будущих сумм. Процесс основывается на концепции временной стоимости денег, суть которой заключается в том, что деньги, доступные сегодня, ценнее, чем та же сумма, полученная в будущем. Это связано с возможностями инвестирования и получения дохода на сегодняшние деньги.

Текущая стоимость будущей суммы рассчитывается с использованием следующей формулы дисконтирования:

$$
PV = \frac{FV}{(1 + i)^n}
$$

где:
- $PV$ — Текущая (приведенная, дисконтированная) стоимость
- $FV$ — Будущая стоимость денежного потока или платежа
- $i$ — Процентная ставка дисконтирования (ставка доходности, требуемая инвестором)
- $n$ — Количество периодов времени между текущей датой и датой получения будущей суммы

Это определение позволяет финансовым аналитикам и инвесторам оценить реальную стоимость будущих инвестиций или платежей в условиях инфляции и альтернативных издержек капитала.

# Инфляция: Определение

Инфляция — это экономический термин, который характеризует процесс роста общего уровня цен на товары и услуги в экономике за определенный период времени. Это явление приводит к снижению покупательной способности денег, то есть каждая единица валюты позволяет покупать меньше товаров и услуг, чем это было до инфляции.

## Причины инфляции

Инфляция может быть вызвана различными факторами, в том числе:

- Увеличением денежной массы в обращении.
- Повышением затрат на производство товаров и услуг.
- Ростом спроса на товары и услуги, превышающим предложение.
- Снижением предложения, не удовлетворяющим текущему спросу.

## Измерение инфляции

Инфляция измеряется как годовой процент изменения уровня цен. Существуют различные индексы для измерения инфляции, такие как индекс потребительских цен (CPI) или индекс цен производителей (PPI).

## Влияние инфляции

Хотя умеренная инфляция часто считается признаком здоровой экономики, высокие уровни инфляции могут привести к экономическим потрясениям, включая эрозию сбережений, увеличение неопределенности в бизнесе и инвестициях, а также снижение доверия к национальной валюте.

# Потребительская корзина: Определение

Потребительская корзина — это набор товаров и услуг, который регулярно покупают домохозяйства для удовлетворения своих повседневных нужд. Этот набор используется для отслеживания изменений в уровне цен и измерения инфляции через расчет индексов цен, таких как индекс потребительских цен (CPI).

## Компоненты потребительской корзины

Компоненты потребительской корзины могут включать:

- Продукты питания и напитки
- Одежда и обувь
- Жилье и коммунальные услуги
- Транспорт
- Медицинские услуги
- Развлечения и отдых
- Образование
- Другие товары и услуги, которые необходимы для повседневной жизни

## Значение потребительской корзины

Потребительская корзина является инструментом для экономистов и политиков, который помогает понять, как изменения цен влияют на стоимость жизни. Регулярное обновление состава корзины необходимо для того, чтобы отражать изменения в потребительских привычках и вводить новые товары и услуги, которые становятся важными для потребителей.

## Когда в экономике присутствует инфляция, то появляются два термина:

- номинальная процентная ставка — отражает реальные цены активов (включает в себя инфляцию);
- реальная процентная ставка — процентная ставка, очищенная от инфляции.
 Связанные т. н. уравнением Фишера:

# Уравнение Фишера: Определение

Уравнение Фишера определяет взаимосвязь между номинальной и реальной процентными ставками с учетом инфляции:

$$ (1 + R_{ном}) = (1 + R_{реал}) \times (1 + I) $$

где:

- $R_{ном}$ — Номинальная процентная ставка, т.е. процентная ставка, по которой инвестированы средства без учета инфляции.
- $R_{реал}$ — Реальная процентная ставка, т.е. номинальная ставка, скорректированная на величину инфляции, отражающая реальную доходность инвестиций.
- $I$ — Уровень инфляции, отражающий среднегодовой рост цен на товары и услуги.

## Как использовать уравнение

Это уравнение позволяет инвесторам определить реальную стоимость возврата инвестиций после учета инфляции. Например, если номинальная процентная ставка составляет 5%, а инфляция — 2%, то реальная процентная ставка будет:

$$ (1 + R_{реал}) = \frac{(1 + 0.05)}{(1 + 0.02)} $$
$$ R_{реал} \approx 0.0294 \text{ или } 2.94\% $$

Таким образом, реальная процентная ставка, скорректированная на инфляцию, составит примерно 2.94%.

# Премия за риск: Определение

Премия за риск относится к дополнительной доходности, которую инвестор ожидает получить за принятие дополнительного риска при инвестировании в рискованные финансовые инструменты по сравнению с инвестированием в безрисковые активы.

## Понимание премии за риск

Премия за риск важна, поскольку предполагается, что инвесторы рациональны и потребуют большей отдачи за увеличение уровня неопределенности относительно возврата своих инвестиций. Основные факторы, влияющие на величину премии за риск, включают:

- Волатильность инвестиций
- Ликвидность актива
- Кредитные риски
- Срок до погашения инвестиций
- Экономические и политические риски

## Пример использования премии за риск

Рассмотрим пример: если безрисковая ставка составляет 2%, а ожидаемая доходность акции — 8%, то премия за риск для этой акции составит 6% (8% - 2%). Эта премия предполагает, что инвесторы ожидают получить дополнительные 6% доходности за принятие высокого уровня риска, связанного с инвестицией в акции.

# Безрисковая ставка: Определение

**Безрисковая ставка** — это гипотетическая ставка доходности инвестиции, при которой риск потери капитала и процентов отсутствует. В финансовом анализе безрисковая ставка используется как основа для определения премии за риск других инвестиций.

## Характеристики безрисковой ставки

- **Нулевой риск невыплаты:** Инвесторы ожидают полный и своевременный возврат как основной суммы, так и процентов.
- **Использование в моделях оценки:** Безрисковая ставка часто используется в моделях оценки активов, таких как CAPM (модель оценки капитальных активов), для расчета ожидаемой доходности инвестиций.
- **Примеры:** Считается, что краткосрочные государственные ценные бумаги, такие как казначейские векселя США, приближаются к безрисковым инвестициям за счет поддержки их государственными обязательствами.

## Пример применения безрисковой ставки

Если казначейский вексель США имеет доходность 2% годовых, то эта ставка может быть использована как безрисковая ставка для расчета ожидаемой доходности более рискованных инвестиций, таких как акции или корпоративные облигации.
